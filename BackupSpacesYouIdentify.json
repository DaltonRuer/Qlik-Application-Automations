{"blocks":[{"id":"A7AA1318-2E61-4062-9B03-0FAA86A9FB38","type":"StartBlock","x":100,"y":100,"disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"45B486EC-56F3-480A-9AD1-87955A4D13CF","inputs":[{"id":"run_mode","value":"scheduled","type":"select","structure":{}},{"id":"schedule_start","value":"2022-01-13 12:00:00","type":"date","structure":{}},{"id":"schedule_stoptime","value":null,"type":"date","structure":{}},{"id":"schedule_interval","value":"86400","type":"select","structure":{}},{"id":"schedule_timezone","value":"America/New_York","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}]},{"id":"3B534835-05F2-40FE-BD8B-79276BAEB25D","type":"SnippetBlock","x":340.2083435058594,"y":1281.9792022705078,"disabled":false,"name":"GetAppInformation","displayName":"Qlik Cloud Services - Get App Information","comment":"Get metadata about the current Application so we can check ","childId":"A475ED9E-62A2-4733-9FB4-D647B5977EC5","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{$.listApps.item.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue automation and report errors","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"A475ED9E-62A2-4733-9FB4-D647B5977EC5","type":"IfElseBlock","x":340.2083435058594,"y":1401.9792022705078,"disabled":false,"name":"condition","displayName":"Condition","comment":"Check IF the appliation priveleges list contains \"export\"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.GetAppInformation.info.privileges}","input2":"export","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"childTrueId":"AE5CEFCB-47BD-492B-8886-A347085A7EF0","childFalseId":"0E8B8F7A-53B1-4637-AF44-42FE43DBC615"},{"id":"45B486EC-56F3-480A-9AD1-87955A4D13CF","type":"VariableBlock","x":92,"y":182,"disabled":false,"name":"ApplicationsNotBackedUp","displayName":"Variable - ApplicationsNotBackedUp","comment":"Clear out the LIST of Application Names that have been backed up","childId":"0B3DBD49-391A-423C-BC63-BC4C89FC3695","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"DC5E6E75-D35E-4FAC-A5A5-5A3856A62B13","operations":[{"id":"empty","key":"8B8226DC-FA25-4641-87B1-E56350BB5048","name":"Empty { variable }"}]},{"id":"5D907DC8-E15B-4BDA-B383-156F665F8EC5","type":"VariableBlock","x":460,"y":1187,"disabled":false,"name":"ApplicationsNotBackedUp","displayName":"Variable - ApplicationsNotBackedUp","comment":"Add this application name to the the list of all applications that were NOT backed up üòû in case you want to use it for any reason following the conclusion of the backup process","childId":"E31CE4A1-04C9-4CD3-8B6D-83472FAF4681","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"DC5E6E75-D35E-4FAC-A5A5-5A3856A62B13","operations":[{"id":"add_item","key":"445BDBAE-DD35-4DF8-B6BF-AA470BA6CFBF","name":"Add item to { variable }","value":"{$.GetAppInformation.info.attributes.name}"}]},{"id":"3C893D8F-5F62-4F73-9F0B-126D6ED45372","type":"ShowBlock","x":100.00003051757812,"y":700.0000152587891,"disabled":false,"name":"output3","displayName":"Output 3","comment":"Simple notification that the entire workflow is now complete and that you have 2 LISTS that you would be able to use anyway you like","childId":"3DE061E6-0504-4062-A90A-34CADFCA53E5","inputs":[{"id":"input","value":"Remember you have a List of Applications that were backed up and a list of applications that could not be backed up to use anyway you would like to\n\nUsing Branch: {$.GitHubVariables.Branch}","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}]},{"id":"0B3DBD49-391A-423C-BC63-BC4C89FC3695","type":"VariableBlock","x":105,"y":306,"disabled":false,"name":"ApplicationsBackedUp","displayName":"Variable - ApplicationsBackedUp","comment":"Clear out the list of Applications Names that were not able to be backed up due to a lack of security permissions","childId":"62D5ABB0-805A-44A8-807B-7BE0DF3B1A12","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"09957F34-EDFD-4FDB-ACF2-AD2A199EAD08","operations":[{"id":"empty","key":"06011374-668B-478D-9E2A-72321B53A50B","name":"Empty { variable }"}]},{"id":"AE5CEFCB-47BD-492B-8886-A347085A7EF0","type":"VariableBlock","x":460,"y":1122,"disabled":false,"name":"ApplicationsBackedUp","displayName":"Variable - ApplicationsBackedUp","comment":"Add this application name to the the list of all applications that were backed up ‚úîÔ∏è in case you want to use it for any reason following the conclusion of the backup process","childId":"C81904A9-D804-4EBC-AEF3-BA2D9C69D2F3","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"09957F34-EDFD-4FDB-ACF2-AD2A199EAD08","operations":[{"id":"add_item","key":"84095D8B-B51C-40F4-9CBF-E73BC2D785D3","name":"Add item to { variable }","value":"{$.GetAppInformation.info.attributes.name}"}]},{"id":"AF54599F-9DC4-478D-A50D-FD7B47841E24","type":"SnippetBlock","x":471,"y":1074,"disabled":false,"name":"CreateOrUpdateFileContent","displayName":"Git Hub - Create Or Update File Content","comment":"Save the file to GitHub. ","childId":null,"inputs":[{"id":"70b4a4c0-4074-11ec-a8e6-c1dc761dcfb1","value":"{$.GitHubVariables.User}","type":"string","structure":[]},{"id":"70b5c000-4074-11ec-969e-792346f99f92","value":"{$.GitHubVariables.Repository}","type":"string","structure":[]},{"id":"70b63220-4074-11ec-b55b-7725e494603a","value":"{$.GetAppInformation.info.attributes.name}.QVF","type":"string","structure":[]},{"id":"b27fff40-4074-11ec-9f16-55d8428ec62c","value":"{$.GitHubVariables.Branch}","type":"string","structure":[]},{"id":"70b75130-4074-11ec-84ab-e102a3b0c185","value":"{$.GitHubVariables.Message}","type":"string","structure":[]},{"id":"70b84f80-4074-11ec-9358-b5650774d83c","value":"{$.exportAppToBase64EncodedFile}","type":"string","structure":[]}],"settings":[{"id":"datasource","value":"b8102cc0-42ff-11ec-b60b-5fb9fa3a6db6","type":"select","structure":[]},{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue automation and report errors","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2","snippet_guid":"70a930c0-4074-11ec-9bb6-b36e27de5d04"},{"id":"C9D8AA5F-2123-42BD-A6C5-733D7970AC98","type":"VariableBlock","x":100.00003051757812,"y":580.0000457763672,"disabled":false,"name":"GitHubVariables","displayName":"Variable - GitHubVariables","comment":"Please input the values for YOUR GitHub Repository\nYou need to input the User, Repository, Branch and Message to use","childId":"3C893D8F-5F62-4F73-9F0B-126D6ED45372","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"8050BDB1-767C-4DA1-AA74-70B537925EA7","operations":[{"id":"set_key_value","key":"9FB377B9-392E-4286-9CF7-7CDC82F5B596","name":"Set key/values of { variable }","value":[{"key":"Branch","value":"{date: 'now', {date: 'now', 'd'}}"},{"key":"User","value":"DaltonRuer"},{"key":"Repository","value":"Qlik-Sense-Backups"},{"key":"Message","value":"Automated Backup Occurred from QAA"}]}]},{"id":"E09E1363-F1E5-43AB-AFB2-E476BCBD21B7","type":"SnippetBlock","x":461,"y":1198,"disabled":false,"name":"exportAppToBase64EncodedFile","displayName":"Qlik Cloud Services - Export App To Base 64 Encoded File","comment":"Export the application to a Base 64 Encoded string which ALWAYS does a backup with NO DATA üìë","childId":"AF54599F-9DC4-478D-A50D-FD7B47841E24","inputs":[{"id":"c0930c20-8645-11eb-8c79-17357db3794c","value":"{$.GetAppInformation.info.attributes.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","displayValue":"Stop - Stop automation and set to failed","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"c08e2d30-8645-11eb-b98e-e77d5a1bebc3"},{"id":"C81904A9-D804-4EBC-AEF3-BA2D9C69D2F3","type":"ShowBlock","x":465,"y":1199,"disabled":false,"name":"output","displayName":"Output","comment":"üìùSimple output to give you a sanity check while the process is running","childId":"E09E1363-F1E5-43AB-AFB2-E476BCBD21B7","inputs":[{"id":"input","value":"{$.GetAppInformation.info.attributes.name}.qvf  .... has been backed up ‚úîÔ∏è","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}]},{"id":"0E8B8F7A-53B1-4637-AF44-42FE43DBC615","type":"ShowBlock","x":459,"y":1619,"disabled":false,"name":"output2","displayName":"Output 2","comment":"üìù Simple output to give you a sanity check while the process is running","childId":"5D907DC8-E15B-4BDA-B383-156F665F8EC5","inputs":[{"id":"input","value":"{$.GetAppInformation.info.attributes.name}  ... Sorry you do not have permissions to backup this application up üòû","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}]},{"id":"E31CE4A1-04C9-4CD3-8B6D-83472FAF4681","type":"EndpointBlock","x":362,"y":1748,"disabled":false,"name":"SendMail","displayName":"Mail - Send Mail","comment":"","childId":null,"inputs":[{"id":"442845a0-cd00-11eb-9aa5-b966a68573b7","value":"Dalton.Ruer@Qlik.Com","type":"string","structure":[]},{"id":"543f08c0-cd00-11eb-b9c6-af8e23cc2439","value":"Hugo.Sheng@Qlik.Com","type":"string","structure":[]},{"id":"5cbdb1d0-cd00-11eb-8afd-ddd4ecc002ac","value":null,"type":"string","structure":[]},{"id":"72cad1e0-cd00-11eb-aa1b-3f42c1d22e38","value":"Was not able to backup the following application to GitHub:  {$.GetAppInformation.info.attributes.name}","type":"string","structure":[]},{"id":"79af8c50-cd24-11eb-a019-dfdc9a7f7317","value":"8ca918e0-cd24-11eb-a713-779c5b59e5f7","type":"select","displayValue":"text","structure":[]},{"id":"7d225d00-cd00-11eb-8493-055760e8b45a","value":"Check the permissions as somehow Dalton doesn't have access to it.","type":"longtext","structure":[]},{"id":"bb841f10-3341-11ec-b9a3-9d6de0bb7866","value":null,"type":"custom","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"datasourcetype_guid":"05407a80-ccfd-11eb-b098-7140f6ac27f4","endpoint_guid":"84a79bf0-ccff-11eb-a508-7d415a725ea7","endpoint_role":"create"},{"id":"3DE061E6-0504-4062-A90A-34CADFCA53E5","type":"ForEachBlock","x":100.00003051757812,"y":940.0000152587891,"disabled":false,"name":"loop","displayName":"Loop","comment":"","childId":null,"inputs":[{"id":"input","value":"{ $.SpacesToBackup }","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"loopBlockId":"D9476894-45AD-40BC-B5D4-0EE95BBBDBB4"},{"id":"62D5ABB0-805A-44A8-807B-7BE0DF3B1A12","type":"VariableBlock","x":106,"y":461,"disabled":false,"name":"SpacesToBackup","displayName":"Variable - SpacesToBackup","comment":"Add any spaces to a list that you want to have backed up","childId":"C9D8AA5F-2123-42BD-A6C5-733D7970AC98","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"variableGuid":"2AA4D978-9260-4D8D-8609-87BFE1032FD3","operations":[{"key":"38092D21-7D38-4AB9-A7F4-B3AABD6320E7","id":"empty","name":"Empty { variable }"},{"key":"B16ADE33-36F7-49A6-BC0F-64C013383A60","id":"add_item","name":"Add item to { variable }","value":"Personal - personal"},{"key":"5957B8B6-479F-49C7-8873-BF86227EED34","id":"add_item","name":"Add item to { variable }","value":"Technology Alliances - 617feb969a7a7e5815caa852"},{"key":"32C6E999-EA3C-4DC7-B481-C3495B5289F2","id":"add_item","name":"Add item to { variable }","value":"Legal - 61f944d08f68876fe70bc6ab"}]},{"id":"50004CD7-3C69-4035-86DF-63D5EDFFE29F","type":"EndpointBlock","x":217.66666412353516,"y":900.2292022705078,"disabled":false,"name":"listApps","displayName":"Qlik Cloud Services - List Apps","comment":"","childId":null,"inputs":[{"id":"8cd8db50-107b-11ec-8082-edc45dd151ef","value":null,"type":"select","structure":{}},{"id":"8ce4fad0-107b-11ec-a6ac-2bd407ad134b","value":"{substr: {$.loop.item}, {add: 2, {strpos: {$.loop.item}, '- '}}, 100}","type":"string","structure":{}}],"settings":[{"id":"maxitemcount","value":null,"type":"string","structure":{}},{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"loopBlockId":"3B534835-05F2-40FE-BD8B-79276BAEB25D","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"8cc63340-107b-11ec-ab5d-f9b221ed2dc5","endpoint_role":"list"},{"id":"D9476894-45AD-40BC-B5D4-0EE95BBBDBB4","type":"ShowBlock","x":220.55555725097656,"y":893.1180877685547,"disabled":false,"name":"output4","displayName":"Output 4","comment":"Put a nice header into the output block to show which Space name and ID is being iterated","childId":"50004CD7-3C69-4035-86DF-63D5EDFFE29F","inputs":[{"id":"input","value":"# Space: {substr: {$.loop.item}, 0, {strpos: {$.loop.item}, ' - '}}    - ID: ({substr: {$.loop.item}, {add: 2, {strpos: {$.loop.item}, '- '}}, 100}])","type":"string","structure":{}}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}]}],"variables":[{"guid":"D6B74581-77B6-423D-A2C9-E8C2C6A53169","name":"DateTime","type":"string"},{"guid":"DC5E6E75-D35E-4FAC-A5A5-5A3856A62B13","name":"ApplicationsNotBackedUp","type":"list"},{"guid":"80ED2BE1-1851-4F0F-B6A8-1882448868F0","name":"NotBackedUp","type":"object"},{"guid":"09957F34-EDFD-4FDB-ACF2-AD2A199EAD08","name":"ApplicationsBackedUp","type":"list"},{"guid":"8050BDB1-767C-4DA1-AA74-70B537925EA7","name":"GitHubVariables","type":"object"},{"guid":"7EE8C2F8-04F5-4BB1-BEA9-B8B4E976D847","name":"SpaceList","type":"list"},{"guid":"2AA4D978-9260-4D8D-8609-87BFE1032FD3","name":"SpacesToBackup","type":"list"}]}